{
  "nodes": [
    {
      "id": "triggerNode_1",
      "type": "triggerNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "graphqlNode",
        "modes": {},
        "trigger": true,
        "values": {
          "nodeName": "API Request",
          "responeType": "async",
          "advance_schema": "{\n  \"sheetId\": \"string\",\n  \"columnId\": \"string\",\n  \"rowId\": \"string\",\n  \"instruction\": \"string\",\n  \"aiType\": \"string\",\n  \"data\": \"string\",\n  \"outputFormat\": \"string\",\n  \"webhookUrl\": \"string\"\n}"
        }
      }
    },
    {
      "id": "conditionNode_312",
      "type": "conditionNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "conditionNode",
        "modes": [],
        "values": {
          "nodeName": "Condition",
          "conditions": [
            {
              "label": "Condition 1",
              "value": "conditionNode_312-addNode_954",
              "condition": "{\n  \"operator\": null,\n  \"operands\": [\n    {\n      \"name\": \"{{triggerNode_1.output.aiType}}\",\n      \"operator\": \"==\",\n      \"value\": \"generate\"\n    }\n  ]\n}"
            },
            {
              "label": "Else",
              "value": "conditionNode_312-addNode_946",
              "condition": {}
            },
            {
              "label": "Condition 2",
              "value": "conditionNode_312-plus-node-addNode_608892-521",
              "condition": "{\n  \"operator\": null,\n  \"operands\": [\n    {\n      \"name\": \"{{triggerNode_1.output.aiType}}\",\n      \"operator\": \"==\",\n      \"value\": \"summarize\"\n    }\n  ]\n}"
            },
            {
              "label": "Condition 3",
              "value": "conditionNode_312-plus-node-addNode_163347-394",
              "condition": "{\n  \"operator\": null,\n  \"operands\": [\n    {\n      \"name\": \"{{triggerNode_1.output.aiType}}\",\n      \"operator\": \"==\",\n      \"value\": \"categorize\"\n    }\n  ]\n}"
            }
          ]
        }
      }
    },
    {
      "id": "conditionNode_799",
      "type": "conditionNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "conditionNode",
        "modes": {},
        "values": {
          "nodeName": "Condition",
          "conditions": [
            {
              "label": "Condition 1",
              "value": "conditionNode_799-addNode_587",
              "condition": "{\n  \"operator\": null,\n  \"operands\": [\n    {\n      \"name\": \"{{triggerNode_1.output.outputFormat}}\",\n      \"operator\": \"==\",\n      \"value\": \"text\"\n    }\n  ]\n}"
            },
            {
              "label": "Else",
              "value": "conditionNode_799-addNode_161",
              "condition": {}
            },
            {
              "label": "Condition 2",
              "value": "conditionNode_799-plus-node-addNode_834736-660",
              "condition": "{\n  \"operator\": null,\n  \"operands\": [\n    {\n      \"name\": \"{{triggerNode_1.output.outputFormat}}\",\n      \"operator\": \"==\",\n      \"value\": \"image\"\n    }\n  ]\n}"
            }
          ]
        }
      }
    },
    {
      "id": "LLMNode_432",
      "type": "dynamicNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "LLMNode",
        "modes": {},
        "values": {
          "nodeName": "Generate Text Prompt",
          "tools": [],
          "prompts": [
            {
              "id": "187c2f4b-c23d-4545-abef-73dc897d6b7b",
              "role": "system",
              "content": "You are an expert prompt generator, who assists human requests to be fully converted to detailed prompts for big LLMs to process and understand user text generation requests with minimal efforts. Your job is to understand the user instructions and given context, construct a 100-150 word detailed prompt encapsulating all that information. Make sure you are clear and direct in you answer leaving little room for interpretation ahead. GIVE NO LEADING STATEMENTS, JUST THE ANSWER."
            },
            {
              "id": "187c2f4b-c23d-4545-abef-73dc897d6b7d",
              "role": "user",
              "content": "USER REQUEST : {{triggerNode_1.output.instruction}}\n\nCONTEXTS : {{triggerNode_1.output.data}}"
            }
          ],
          "memories": "[]",
          "messages": "[]",
          "attachments": ""
        }
      }
    },
    {
      "id": "LLMNode_658",
      "type": "dynamicNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "LLMNode",
        "modes": {},
        "values": {
          "nodeName": "Generate Text",
          "tools": [],
          "prompts": [
            {
              "id": "187c2f4b-c23d-4545-abef-73dc897d6b7b",
              "role": "system",
              "content": "You are an Generation Assistant whose job is to fulfil the given user request. GIVE NO LEADING STATEMENTS, JUST THE ANSWER IN PROPER MARKDOWN FORMAT i.e. WELL SPACED AND SECTIONED IF THE NEED BE. REMEMBER NOT TO GIVE ANY LEADING STATEMENTS OR BACKTICKS IN THE START OR END, IT IS ASSUME ANSWER WILL BE IN MARKDOWN AS IT WILL BE DISPLAYED STRAIGHT."
            },
            {
              "id": "187c2f4b-c23d-4545-abef-73dc897d6b7d",
              "role": "user",
              "content": "USER REQUEST : {{LLMNode_432.output.generatedResponse}}"
            }
          ],
          "memories": "[]",
          "messages": "[]",
          "attachments": ""
        }
      }
    },
    {
      "id": "LLMNode_608",
      "type": "dynamicNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "LLMNode",
        "modes": {},
        "values": {
          "nodeName": "Generate Image Prompt",
          "tools": [],
          "prompts": [
            {
              "id": "187c2f4b-c23d-4545-abef-73dc897d6b7b",
              "role": "system",
              "content": "You are an expert image prompt generator, who assists human requests to be fully converted to detailed prompts for big Image generation models to process and understand user image generation requests with minimal efforts. Your job is to understand the user instructions and given context, construct a 100-150 word detailed prompt encapsulating all that information. Make sure you are clear and direct in you answer leaving little room for interpretation ahead. GIVE NO LEADING STATEMENTS, JUST THE ANSWER."
            },
            {
              "id": "187c2f4b-c23d-4545-abef-73dc897d6b7d",
              "role": "user",
              "content": "USER REQUEST : {{triggerNode_1.output.instruction}}\n\nCONTEXT : {{triggerNode_1.output.data}}"
            }
          ],
          "memories": "[]",
          "messages": "[]",
          "attachments": ""
        }
      }
    },
    {
      "id": "codeNode_750",
      "type": "dynamicNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "codeNode",
        "modes": {},
        "values": {
          "nodeName": "Finalise Generation Response",
          "code": "let response = \"\";\n\nif({{LLMNode_658.output}} && {{LLMNode_658.output.generatedResponse}}){\n  response = {{LLMNode_658.output.generatedResponse}};\n} else if({{LLMNode_533.output}} && {{LLMNode_533.output.images}}){\n  const images = {{LLMNode_533.output.images}};\n  response = images[0];\n}\n\noutput = response || \"No output generated\";"
        }
      }
    },
    {
      "id": "LLMNode_533",
      "type": "dynamicNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "LLMNode",
        "modes": {},
        "values": {
          "nodeName": "Generate Image",
          "tools": [],
          "prompts": [
            {
              "id": "187c2f4b-c23d-4545-abef-73dc897d6b7b",
              "role": "system",
              "content": "You are an Image Generation Assistant whose job is to fulfil the given user image gen request. GIVE NO LEADING STATEMENTS, JUST THE FINAL IMAGE AND A SHORT DESCRIPTION SHOULD DO."
            },
            {
              "id": "187c2f4b-c23d-4545-abef-73dc897d6b7d",
              "role": "user",
              "content": "GIVE ME AN IMAGE OF THIS REQUEST : {{LLMNode_608.output.generatedResponse}}"
            }
          ],
          "memories": "[]",
          "messages": "[]",
          "attachments": ""
        }
      }
    },
    {
      "id": "LLMNode_588",
      "type": "dynamicNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "LLMNode",
        "modes": {},
        "values": {
          "nodeName": "Summarisation",
          "tools": [],
          "prompts": [
            {
              "id": "187c2f4b-c23d-4545-abef-73dc897d6b7b",
              "role": "system",
              "content": "You are an Summarisation Assistant whose job is to fulfil the given user request. GIVE NO LEADING STATEMENTS, JUST THE ANSWER IN PROPER MARKDOWN FORMAT i.e. WELL SPACED AND SECTIONED IF THE NEED BE. REMEMBER NOT TO GIVE ANY LEADING STATEMENTS OR BACKTICKS IN THE START OR END, IT IS ASSUME ANSWER WILL BE IN MARKDOWN AS IT WILL BE DISPLAYED STRAIGHT."
            },
            {
              "id": "187c2f4b-c23d-4545-abef-73dc897d6b7d",
              "role": "user",
              "content": "SUMMARISE BASED ON THE USER REQUEST : {{triggerNode_1.output.instruction}}\n\nAND CONTEXT PARAMS : {{triggerNode_1.output.data}}"
            }
          ],
          "memories": "[]",
          "messages": "[]",
          "attachments": ""
        }
      }
    },
    {
      "id": "LLMNode_447",
      "type": "dynamicNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "LLMNode",
        "modes": {},
        "values": {
          "nodeName": "Categorise",
          "tools": [],
          "prompts": [
            {
              "id": "187c2f4b-c23d-4545-abef-73dc897d6b7b",
              "role": "system",
              "content": "You are an Categorisation Assistant whose job is to fulfil the given user request. GIVE NO LEADING STATEMENTS, JUST THE ANSWER IN PROPER CATEGORY IN TEXT.REMEMBER NOT TO GIVE ANY LEADING STATEMENTS OR BACKTICKS IN THE START OR END, IT IS ASSUME ANSWER WILL BE THE CATEGORY SO KEEP THAT IN MIND."
            },
            {
              "id": "187c2f4b-c23d-4545-abef-73dc897d6b7d",
              "role": "user",
              "content": "USER REQUEST : {{triggerNode_1.output.instruction}}\n\nCATEGORISE THE INFORMATION : {{triggerNode_1.output.data}}"
            }
          ],
          "memories": "[]",
          "messages": "[]",
          "attachments": ""
        }
      }
    },
    {
      "id": "codeNode_473",
      "type": "dynamicNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "codeNode",
        "modes": {},
        "values": {
          "nodeName": "Finalise Response",
          "code": "let response = \"\";\n\nif({{LLMNode_658.output.generatedResponse}} || {{LLMNode_533.output.images}}){\n  response = {{codeNode_750.output}};\n}\nelse if({{LLMNode_588.output.generatedResponse}}){\n  response = {{codeNode_302.output}};\n}\nelse if({{LLMNode_447.output.generatedResponse}}){\n  response = {{codeNode_319.output}};\n}\nelse{\n  response = {{codeNode_494.output}};\n}\n\noutput = response;"
        }
      }
    },
    {
      "id": "codeNode_302",
      "type": "dynamicNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "codeNode",
        "modes": {},
        "values": {
          "nodeName": "Finalise Summary Response",
          "code": "output = {{LLMNode_588.output.generatedResponse}};"
        }
      }
    },
    {
      "id": "codeNode_319",
      "type": "dynamicNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "codeNode",
        "modes": {},
        "values": {
          "nodeName": "Finalise Categorisation Response",
          "code": "output = {{LLMNode_447.output.generatedResponse}};"
        }
      }
    },
    {
      "id": "codeNode_494",
      "type": "dynamicNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "codeNode",
        "modes": {},
        "values": {
          "nodeName": "Invalid Request",
          "code": "output = \"Invalid Request\""
        }
      }
    },
    {
      "id": "plus-node-addNode_782449",
      "type": "addNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "addNode",
        "values": {
          "nodeName": ""
        }
      }
    },
    {
      "id": "apiNode_280",
      "type": "dynamicNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "apiNode",
        "modes": {},
        "values": {
          "nodeName": "Update Cell",
          "url": "{{triggerNode_1.output.webhookUrl}}",
          "body": "{\n  \"value\": \"{{codeNode_473.output}}\",\n  \"metadata\": {\n    \"sheetId\": \"{{triggerNode_1.output.sheetId}}\",\n    \"columnId\": \"{{triggerNode_1.output.columnId}}\",\n    \"rowId\": \"{{triggerNode_1.output.rowId}}\"\n  }\n}",
          "method": "POST",
          "retries": "0",
          "retry_deplay": "0"
        }
      }
    },
    {
      "id": "responseNode_triggerNode_1",
      "type": "dynamicNode",
      "position": {
        "x": 0,
        "y": 0
      },
      "data": {
        "nodeId": "graphqlResponseNode",
        "values": {
          "nodeName": "API Response",
          "retries": "0",
          "webhookUrl": "",
          "retry_delay": "0",
          "outputMapping": "{\n  \"value\": \"{{codeNode_473.output}}\",\n  \"metadata\": {\n    \"sheetId\": \"{{triggerNode_1.output.sheetId}}\",\n    \"columnId\": \"{{triggerNode_1.output.columnId}}\",\n    \"rowId\": \"{{triggerNode_1.output.rowId}}\"\n  }\n}"
        }
      }
    }
  ],
  "edges": [
    {
      "id": "triggerNode_1-conditionNode_312",
      "source": "triggerNode_1",
      "target": "conditionNode_312",
      "type": "defaultEdge",
      "sourceHandle": "bottom",
      "targetHandle": "top"
    },
    {
      "id": "conditionNode_312-addNode_954",
      "source": "conditionNode_312",
      "target": "conditionNode_799",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "data": {
        "condition": "Condition 1"
      },
      "type": "conditionEdge"
    },
    {
      "id": "conditionNode_312-addNode_946",
      "source": "conditionNode_312",
      "target": "LLMNode_447",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "data": {
        "condition": "Condition 3"
      },
      "type": "conditionEdge"
    },
    {
      "id": "conditionNode_312-plus-node-addNode_608892-521",
      "source": "conditionNode_312",
      "target": "codeNode_494",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "data": {
        "condition": "Else"
      },
      "type": "conditionEdge"
    },
    {
      "id": "conditionNode_312-plus-node-addNode_163347-394",
      "source": "conditionNode_312",
      "target": "LLMNode_588",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "data": {
        "condition": "Condition 2"
      },
      "type": "conditionEdge"
    },
    {
      "id": "conditionNode_799-addNode_587",
      "source": "conditionNode_799",
      "target": "LLMNode_432",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "data": {
        "condition": "Condition 1"
      },
      "type": "conditionEdge"
    },
    {
      "id": "conditionNode_799-addNode_161",
      "source": "conditionNode_799",
      "target": "LLMNode_608",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "data": {
        "condition": "Condition 2"
      },
      "type": "conditionEdge"
    },
    {
      "id": "conditionNode_799-plus-node-addNode_834736-660",
      "source": "conditionNode_799",
      "target": "plus-node-addNode_782449",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "data": {
        "condition": "Else"
      },
      "type": "conditionEdge"
    },
    {
      "id": "LLMNode_432-LLMNode_658",
      "source": "LLMNode_432",
      "target": "LLMNode_658",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "type": "defaultEdge"
    },
    {
      "id": "LLMNode_658-codeNode_750",
      "source": "LLMNode_658",
      "target": "codeNode_750",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "type": "defaultEdge"
    },
    {
      "id": "LLMNode_533-codeNode_750",
      "source": "LLMNode_533",
      "target": "codeNode_750",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "type": "defaultEdge"
    },
    {
      "id": "plus-node-addNode_782449-codeNode_750",
      "source": "plus-node-addNode_782449",
      "target": "codeNode_750",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "type": "defaultEdge"
    },
    {
      "id": "LLMNode_608-LLMNode_533",
      "source": "LLMNode_608",
      "target": "LLMNode_533",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "type": "defaultEdge"
    },
    {
      "id": "codeNode_750-codeNode_473",
      "source": "codeNode_750",
      "target": "codeNode_473",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "type": "defaultEdge"
    },
    {
      "id": "codeNode_302-codeNode_473",
      "source": "codeNode_302",
      "target": "codeNode_473",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "type": "defaultEdge"
    },
    {
      "id": "codeNode_319-codeNode_473",
      "source": "codeNode_319",
      "target": "codeNode_473",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "type": "defaultEdge"
    },
    {
      "id": "codeNode_494-codeNode_473",
      "source": "codeNode_494",
      "target": "codeNode_473",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "type": "defaultEdge"
    },
    {
      "id": "LLMNode_588-codeNode_302",
      "source": "LLMNode_588",
      "target": "codeNode_302",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "type": "defaultEdge"
    },
    {
      "id": "LLMNode_447-codeNode_319",
      "source": "LLMNode_447",
      "target": "codeNode_319",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "type": "defaultEdge"
    },
    {
      "id": "codeNode_473-apiNode_280",
      "source": "codeNode_473",
      "target": "apiNode_280",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "type": "defaultEdge"
    },
    {
      "id": "apiNode_280-responseNode_triggerNode_1",
      "source": "apiNode_280",
      "target": "responseNode_triggerNode_1",
      "sourceHandle": "bottom",
      "targetHandle": "top",
      "type": "defaultEdge"
    },
    {
      "id": "response-responseNode_triggerNode_1",
      "source": "triggerNode_1",
      "target": "responseNode_triggerNode_1",
      "sourceHandle": "to-response",
      "targetHandle": "from-trigger",
      "type": "responseEdge"
    }
  ]
}